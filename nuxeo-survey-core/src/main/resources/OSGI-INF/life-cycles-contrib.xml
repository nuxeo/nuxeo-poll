<?xml version="1.0"?>
<component name="org.nuxeo.ecm.survey.core.life.cycles">

  <extension target="org.nuxeo.ecm.core.lifecycle.LifeCycleService"
    point="lifecycle">

    <lifecycle name="surveyLifeCycle" defaultInitial="project">
      <transitions>
        <transition name="publish" destinationState="published">
          <description>Publish the survey</description>
        </transition>
        <transition name="close" destinationState="closed">
          <description>Close the published survey</description>
        </transition>
        <transition name="delete" destinationState="deleted">
          <description>Move the survey to trash (temporary delete)</description>
        </transition>
        <transition name="undelete" destinationState="project">
          <description>Recover the survey from trash</description>
        </transition>
      </transitions>
      <states>
        <state name="project" description="Default state" initial="true">
          <transitions>
            <transition>delete</transition>
            <transition>publish</transition>
          </transitions>
        </state>
        <state name="published" description="Survey is published">
          <transitions>
            <transition>close</transition>
          </transitions>
        </state>
        <state name="closed" description="Survey is closed">
          <transitions>
            <transition>delete</transition>
          </transitions>
        </state>
        <state name="deleted" description="Survey is deleted">
          <transitions>
            <transition>undelete</transition>
          </transitions>
        </state>
      </states>
    </lifecycle>
  </extension>

  <extension target="org.nuxeo.ecm.core.lifecycle.LifeCycleService"
    point="types">

    <types>
      <type name="Survey">surveyLifeCycle</type>
    </types>

  </extension>

</component>
